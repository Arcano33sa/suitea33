
:root{--bg:#0f0f0f;--panel:#171717;--muted:#9a9a9a;--text:#f0f0f0;--accent:#ffd700;--ok:#1db954;--warn:#f0a31a;--danger:#e74c3c;--chip:#222;--chip-bd:#2d2d2d}
*{box-sizing:border-box}
html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial,sans-serif;max-width:100%}
/* Evita “sensación” de overflow horizontal por tablas/acciones que se estiran */
body{overflow-x:hidden}
/* Header compuesto */
header.brandbar{position:sticky;top:0;background:#121212;border-bottom:1px solid #2a2a2a;padding:10px 14px;z-index:10;display:flex;align-items:center;gap:14px;min-height:72px}
.brandwrap{display:flex;align-items:center;gap:10px}
.brand-left{height:56px;width:auto;border-radius:8px}
.brand-right{height:44px;width:auto}
.app-title{font-size:20px;margin:0;display:flex;align-items:center;gap:10px;line-height:1}
@media (max-width:560px){
  .brand-left{height:48px}
  .brand-right{height:36px}
  .app-title{font-size:18px}
}
@media (max-width:420px){
  header.brandbar{flex-wrap:wrap}
  .app-title{order:3;width:100%;margin-top:6px}
}
.container{padding:12px 12px 80px;width:100%;max-width:100%}
.card{background:var(--panel);border:1px solid #2a2a2a;border-radius:14px;padding:14px;margin:12px 0}
label{font-size:13px;color:var(--muted);display:block;margin:8px 0 6px}
input,select,button,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid #333;background:#141414;color:#f0f0f0;font-size:16px;line-height:1.2}
input[type="date"]{padding:10px}
.row{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr);gap:12px;align-items:end}
.row .card.full{grid-column:1 / -1}
.row3{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr) minmax(0,1fr);gap:12px}
.row4{display:grid;grid-template-columns:minmax(0,1fr) minmax(0,1fr) minmax(0,1fr) minmax(0,1fr);gap:12px}
/* Permite que inputs/selects/botones dentro de grid/flex puedan encogerse sin desbordar */
.row > *, .row3 > *, .row4 > *{min-width:0}

/* Barra superior (Vender/Eventos): alinea y permite wrap en pantallas angostas */
.topbar{display:flex;align-items:center;justify-content:space-between;gap:8px;flex-wrap:wrap}
.topbar > *{flex:1 1 180px;min-width:0}
.topbar > button:first-of-type{margin-left:auto; flex:0 0 auto}
.topbar > button{flex:0 0 auto; width:auto}
.topbar > select{min-width:180px}

/* Tablas anchas: evita overflow del viewport y mantiene acciones visibles */
.table-scroll{width:100%;max-width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;position:relative}
.table-scroll table{min-width:720px}
@media (max-width:560px){
  .table-scroll table{min-width:640px}
}

/* Columna de acciones sticky (botones rojos a la derecha siempre dentro del viewport) */
#tbl-day, #tbl-eventos{border-collapse:separate; border-spacing:0}
#tbl-day th:last-child, #tbl-day td:last-child,
#tbl-eventos th:last-child, #tbl-eventos td:last-child{
  position:sticky;
  right:0;
  background:var(--panel);
  z-index:3;
  box-shadow:-10px 0 10px rgba(0,0,0,.35);
}
#tbl-day thead th:last-child, #tbl-eventos thead th:last-child{z-index:4}

/* Acciones / toolbars: wrap ordenado, sin estirar botones */
.actions{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:flex-start;
}
.actions.end{justify-content:flex-end}
.actions.center{justify-content:center}
.actions button{width:auto; flex:0 0 auto}

/* Pastilla premium A33 (solo forma + borde + sombra; colores vienen de variantes existentes) */
.btn-pill{
  width:auto;
  flex:0 0 auto;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap:8px;
  padding:8px 12px;
  border-radius:999px;
  max-width:100%;
  white-space:normal;
  font-size:14px;
  font-weight:700;
  line-height:1.1;
  border:1px solid rgba(212,175,55,0.35);
  box-shadow:0 6px 16px rgba(0,0,0,0.25);
}
.btn-pill:disabled{opacity:.55; box-shadow:none}
.btn-pill:not(:disabled):active{filter:brightness(.98)}

/* Pastilla mini (para acciones compactas tipo Sincronizar / Sobrantes) */
.btn-pill-mini{
  padding:6px 10px;
  font-size:12px;
  line-height:1.05;
}

/* Sobrantes → Lote hijo (Inventario por evento) */
.sobrante-panel{
  margin-top:10px;
  padding:10px;
  border-radius:14px;
  background:#101010;
  border:1px solid rgba(212,175,55,0.22);
  box-shadow:0 8px 22px rgba(0,0,0,0.22);
}
.sobrante-panel-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.sobrante-title{
  font-weight:800;
  letter-spacing:.2px;
}
.sobrante-grid{
  display:grid;
  grid-template-columns:repeat(5, minmax(46px, 1fr));
  gap:8px;
  margin-top:10px;
}
.sobrante-cell{display:flex; flex-direction:column; gap:4px}
.sobrante-cell label{font-size:12px; color:var(--muted); font-weight:800; letter-spacing:.3px}
.sobrante-cell input{width:100%}
@media (max-width: 520px){
  .sobrante-grid{grid-template-columns:repeat(3, minmax(46px, 1fr))}
}

/* Reverso de asignación (Inventario por evento) */
.reverso-panel{
  margin-top:10px;
  padding:10px;
  border-radius:14px;
  background:#101010;
  border:1px solid rgba(212,175,55,0.22);
  box-shadow:0 8px 22px rgba(0,0,0,0.22);
}
.reverso-panel-head{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:10px;
  flex-wrap:wrap;
}
.reverso-title{font-weight:800; letter-spacing:.2px}
.reverso-grid{
  display:grid;
  grid-template-columns:repeat(5, minmax(46px, 1fr));
  gap:8px;
  margin-top:10px;
}
.reverso-cell{display:flex; flex-direction:column; gap:4px}
.reverso-cell label{font-size:12px; color:var(--muted); font-weight:800; letter-spacing:.3px}
.reverso-cell span{
  display:block;
  width:100%;
  padding:8px 10px;
  border-radius:10px;
  background:#141414;
  border:1px solid rgba(212,175,55,0.22);
  text-align:center;
  font-weight:900;
  color:var(--accent);
}
@media (max-width: 520px){
  .reverso-grid{grid-template-columns:repeat(3, minmax(46px, 1fr))}
}


/* Vasos panel (colapsable persistente) */
.is-collapsed{display:none !important}

.vasos-panel{margin:12px 0}

.vasos-panel-toggle{
  background:var(--panel);
  color:var(--text);
  border:1px solid rgba(212,175,55,0.35);
  box-shadow:0 6px 16px rgba(0,0,0,0.22);
  justify-content:space-between;
  padding:10px 14px;
}

.vasos-panel-toggle .vasos-panel-title{
  font-weight:800;
  letter-spacing:.2px;
}

.vasos-panel-toggle .vasos-panel-meta{
  display:inline-flex;
  align-items:center;
  gap:8px;
  color:var(--muted);
  font-weight:700;
}

.vasos-panel-toggle .vasos-panel-caret{
  color:var(--accent);
  font-weight:900;
}

.vasos-panel-body{
  margin-top:10px;
}

.vasos-panel-actions{
  display:flex;
  justify-content:flex-end;
  margin:0 0 8px;
}

.vasos-panel-close{
  width:auto;
  border-radius:999px;
  padding:7px 10px;
  border:1px solid rgba(212,175,55,0.25);
  background:#141414;
  color:var(--accent);
  font-weight:800;
  box-shadow:0 6px 16px rgba(0,0,0,0.18);
}

.btn-mini{width:auto; padding:8px 10px; border-radius:10px; font-size:13px}

/* Eventos: la celda de acciones NO debe forzar scroll horizontal en iPad */
#tbl-eventos td.actions{white-space:normal; justify-content:flex-end}
#tbl-inv td.actions{white-space:normal; justify-content:flex-end}

/* iPad/Tablet: permitir que columnas largas (fechas) rompan línea y no obliguen a scroll */
@media (max-width: 1024px){
  #tbl-eventos th,
  #tbl-eventos td{white-space:normal}
  #tbl-eventos td{padding:8px;font-size:13px}
  #tbl-eventos td:nth-child(4),
  #tbl-eventos td:nth-child(5){font-size:12px;line-height:1.15}
  #tbl-eventos td.actions button{padding:6px 8px;font-size:12px}
}

@media (max-width:420px){
  .container{padding-left:10px;padding-right:10px}
  .topbar > *{flex-basis:140px}
  .topbar > select{min-width:140px}
  .actions button:not(.btn-pill){font-size:12px;padding:8px 9px}
  .btn-mini{font-size:12px;padding:7px 9px}
}
button{cursor:pointer}
.btn-primary{background:var(--accent);color:#000;font-weight:700}
.btn-ok{background:var(--ok);color:#000;font-weight:700}
.btn-warn{background:var(--warn);color:#000;font-weight:700}
.btn-danger{background:var(--danger);color:#fff;font-weight:700}
.badge{display:inline-block;padding:4px 8px;border-radius:999px;background:#2a2a2a;color:var(--accent);font-weight:600}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border-bottom:1px solid #2a2a2a;padding:9px;text-align:left;font-size:14px;white-space:nowrap}
tfoot td{font-weight:700}
/* -----------------------------
   A33 · Barra inferior (Tabs) — Premium
   ----------------------------- */
.tabbar{
  /* Layout */
  position:fixed;
  left:50%;
  transform:translateX(-50%);
  bottom:calc(10px + constant(safe-area-inset-bottom));
  bottom:calc(10px + env(safe-area-inset-bottom));
  width:min(980px, calc(100vw - 20px));
  z-index:11;

  /* Cápsula */
  --tab-gold:#ddbf64;
  --tab-gold-2:#b28d38;
  background:rgba(0,0,0,.92);
  border:1px solid rgba(221,191,100,.55);
  box-shadow:0 10px 30px rgba(0,0,0,.55);
  border-radius:22px;
  -webkit-backdrop-filter: blur(10px);
  backdrop-filter: blur(10px);

  /* Grid */
  display:grid;
  grid-template-columns:repeat(8, minmax(0,1fr));
  gap:6px;
  padding:9px;
}

.tabbar button{
  min-height:44px;
  border:none;
  border-radius:16px;
  padding:9px 5px 7px;
  background:transparent;
  color:rgba(255,255,255,.84);
  font-size:10px;
  line-height:1.1;
  letter-spacing:.2px;
  font-weight:600;
  position:relative;
}

.tabbar button:hover{background:rgba(221,191,100,.10)}

.tabbar button.active{
  color:var(--tab-gold);
  background:rgba(221,191,100,.10);
  box-shadow: inset 0 0 0 1px rgba(221,191,100,.22);
}

.tabbar button.active::after{
  content:"";
  position:absolute;
  left:50%;
  transform:translateX(-50%);
  bottom:6px;
  width:18px;
  height:3px;
  border-radius:999px;
  background:var(--tab-gold);
}

/* Si el ancho es insuficiente: 2 filas 4 + 3 (sin overflow-x) */
@media (max-width: 620px){
  .tabbar{
    grid-template-columns:repeat(12, minmax(0,1fr));
    gap:8px 6px;
    border-radius:20px;
  }
  .tabbar button{
    grid-column: span 3; /* 4 botones (12/3) */
    font-size:10.5px;
    border-radius:14px;
  }.tabbar button.active::after{width:16px}
}

/* Espaciador para que el contenido no quede debajo de la barra */
footer{
  height:calc(84px + constant(safe-area-inset-bottom));
  height:calc(84px + env(safe-area-inset-bottom));
}
@media (max-width: 620px){
  footer{
    height:calc(136px + constant(safe-area-inset-bottom));
    height:calc(136px + env(safe-area-inset-bottom));
  }
}
small.muted{color:var(--muted)}
.flag{display:flex;align-items:center;gap:8px}
.flag input[type="checkbox"]{width:auto}

/* Cliente (Ventas) */
.customer-controls{display:flex;gap:10px;align-items:center;flex-wrap:wrap;justify-content:flex-start}
.customer-controls .flag{margin:0}

/* Cliente v2 (POS > Vender): picker propio + gestión colapsable */
#sale-customer-row{grid-template-columns:1fr}
.customer-v2{display:flex;flex-wrap:wrap;gap:10px;align-items:flex-end}
.customer-v2-field{flex:1 1 260px;min-width:220px}
.customer-v2-actions{display:flex;flex-wrap:wrap;gap:8px;align-items:center}
.customer-v2-actions .flag{margin:0}
.customer-v2-actions .btn-link{padding:6px 0}
.customer-v2-sticky{font-size:13px}

.customer-manage{margin-top:8px}
	.customer-manage-list{display:flex;flex-direction:column;gap:8px}
	.customer-manage-item{display:flex;align-items:center;justify-content:space-between;gap:10px;flex-wrap:wrap;padding:8px 10px;border:1px solid #2a2a2a;border-radius:12px;background:#111}
.customer-manage-name{font-weight:800}
.customer-manage-meta{display:flex;align-items:center;gap:8px;flex-wrap:wrap}
	.customer-manage-item-actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:flex-end}
	.customer-manage-item-actions .btn-pill-mini{white-space:nowrap}
	.customer-manage-item-actions .btn-disabled{opacity:.55;cursor:not-allowed;filter:grayscale(.15)}
.badge-on{background:#0f1b0f;color:#b6f0b6;border:1px solid #214021}
.badge-off{background:#2a1b0f;color:#ffd7a1;border:1px solid #5a3d12}

	/* Gestionar clientes (v2.1): toolbar + scroll interno + acordeón por letra */
	.customer-manage-toolbar{margin-top:8px}
	.customer-manage-toolbar-top{display:flex;gap:10px;flex-wrap:wrap;align-items:flex-end;justify-content:space-between}
	.customer-manage-search{flex:1 1 260px;min-width:220px}
	.customer-manage-actions{display:flex;gap:8px;flex-wrap:wrap;align-items:center;justify-content:flex-start}
	.customer-manage-filters{display:flex;gap:6px;flex-wrap:wrap}
	.customer-manage-filters button{opacity:.72}
	.customer-manage-filters button.is-active{opacity:1;border-color:rgba(212,175,55,0.8);box-shadow:0 0 0 3px rgba(255,215,0,0.18)}
	.customer-manage-compact-toggle{font-size:12.5px}
	.customer-manage-scroll{max-height:52vh;overflow:auto;-webkit-overflow-scrolling:touch;margin-top:8px;padding-right:2px}

	.customer-manage-group{border:1px solid #2a2a2a;border-radius:14px;background:#0e0e0e;overflow:hidden}
	.customer-manage-group-header{width:100%;display:flex;align-items:center;justify-content:space-between;gap:10px;padding:9px 10px;background:#101010;color:#f5f5f5;border:0;cursor:pointer;text-align:left}
	.customer-manage-group-header:active{filter:brightness(.98)}
	.customer-manage-group-left{display:flex;align-items:center;gap:10px;min-width:0}
	.customer-manage-group-letter{font-weight:900;letter-spacing:.7px}
	.customer-manage-group-count{display:inline-flex;align-items:center;justify-content:center;padding:2px 8px;border-radius:999px;background:#111;border:1px solid rgba(212,175,55,0.22);font-size:12px;opacity:.9}
	.customer-manage-group-chevron{opacity:.85}
	.customer-manage-group-body{padding:8px 10px 10px;display:flex;flex-direction:column;gap:8px}
	.customer-manage-results-head{display:flex;align-items:center;justify-content:space-between;gap:10px;padding:8px 10px;border:1px dashed rgba(212,175,55,0.25);border-radius:12px;background:#0f0f0f}
	.customer-manage-results-title{font-weight:800}

	/* Modo compacto (preferencia) */
	.customer-manage.compact .customer-manage-list{gap:6px}
	.customer-manage.compact .customer-manage-item{padding:6px 8px;border-radius:10px}
	.customer-manage.compact .customer-manage-name{font-size:13px}
	.customer-manage.compact .badge{font-size:11px;padding:2px 6px}
	.customer-manage.compact .customer-manage-group-header{padding:7px 8px}
	.customer-manage.compact .customer-manage-group-body{padding:6px 8px 8px;gap:6px}
	.customer-manage.compact .btn-pill-mini{padding:5px 9px;font-size:11.5px}

.customer-picker-list{display:flex;flex-direction:column;gap:8px}
.customer-picker-item{width:100%;text-align:left;padding:10px 12px;border-radius:12px;border:1px solid rgba(212,175,55,0.25);background:#111;color:#f5f5f5;font-weight:700;cursor:pointer}
.customer-picker-item:active{filter:brightness(.98)}

.modal .panel.panel-compact{max-width:560px}


.btn-outline{
  width:auto;
  border-radius:999px;
  padding:8px 12px;
  border:1px solid rgba(212,175,55,0.35);
  background:#141414;
  color:var(--accent);
  font-weight:800;
  box-shadow:0 6px 16px rgba(0,0,0,0.18);
}
.btn-outline:active{filter:brightness(.98)}
.compact th, .compact td{font-size:13px}
.info{padding:9px;border-radius:10px;background:#0f1b0f;border:1px solid #214021;color:#b6f0b6;margin-top:8px}
.warn{padding:9px;border-radius:10px;background:#2a1b0f;border:1px solid #5a3d12;color:#ffd7a1;margin-top:8px}

/* Banner premium: Día cerrado (Caja Chica) */
.a33-guard-banner{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:wrap}
.a33-guard-text{min-width:220px}
.a33-guard-title{font-weight:800;letter-spacing:.2px}
.a33-guard-sub{font-size:13px;opacity:.92;margin-top:2px}
.a33-guard-actions{flex:0 0 auto}

/* Vender bloqueado por día cerrado: atenuar controles sin romper layout */
.sell-locked #sell-block,
.sell-locked .row4,
.sell-locked #sale-bank-row,
.sell-locked details.card,
.sell-locked #cup-block{opacity:.55;filter:saturate(.88)}

.tag{display:inline-block;padding:3px 8px;border-radius:999px;background:#2a2a2a;color:#ddd;font-size:12px;margin-left:6px}
.tag.closed{background:#3a2222;color:#ffb3b3}
.tag.open{background:#223a22;color:#b3ffb3}
.stockpill{display:inline-block;padding:3px 8px;border-radius:10px;background:#222;border:1px solid #333;margin-left:8px}
.stockpill.low{color:#ffb3b3;border-color:#5a3d3d}
/* Chips productos */
.chips{display:flex;gap:10px;flex-wrap:wrap;margin:10px 0 0}
.chip{background:#222;border:2px solid #2d2d2d;border-radius:999px;padding:12px 16px;font-weight:700;cursor:pointer;opacity:.75;transition:opacity .15s ease, box-shadow .15s ease, border-color .15s ease; width:auto !important; flex:0 0 auto}
.chip.disabled{opacity:.35;pointer-events:none}
.chip.active{border-color:var(--accent);box-shadow:0 0 0 3px rgba(255,215,0,.22);opacity:1}

/* Separador premium entre Productos y Extras (sin título) */
.chips-sep{
  /* fuerza salto de línea: extras siempre quedan abajo */
  flex:0 0 100%;
  width:100%;
  display:block;
  position:relative;
  margin:6px 0;
  padding:10px 0; /* aire arriba/abajo */

  /* oculta el texto “Extras” sin tocar JS */
  font-size:0;
  line-height:0;
  color:transparent;
  user-select:none;
}
.chips-sep::before{
  content:"";
  display:block;
  width:100%;
  height:1px;
  /* dorado sutil con toque rojo (baja opacidad), estilo A33 */
  background:linear-gradient(
    90deg,
    transparent,
    rgba(221,191,100,.55),
    rgba(123,24,24,.18),
    rgba(221,191,100,.55),
    transparent
  );
}

/* Defensa extra: evita cualquier sensación de scroll horizontal en iPad */
#product-chips{max-width:100%;overflow-x:hidden}
.stepper{display:flex;gap:8px;align-items:center}
.stepper button{width:44px;height:44px;border-radius:12px;font-size:20px;line-height:1;padding:0}
.stepper input{width:100%;text-align:center;font-variant-numeric:tabular-nums}
.totalbar{position:fixed;left:0;right:0;bottom:58px;background:#151515;border-top:1px solid #2a2a2a;display:flex;gap:12px;align-items:center;padding:10px 12px;z-index:12}
.totalbar .tot{font-size:20px;font-weight:800;letter-spacing:.2px}
.totalbar .grow{flex:1}
.pay-ef{background:#1f2b1f;color:#baf2ba}
.pay-tr{background:#1f2230;color:#b3c6ff}
.pay-cr{background:#2d1f2f;color:#ffb3d1}
.toast{position:fixed;top:10px;left:50%;transform:translateX(-50%);background:#222;border:1px solid #333;padding:10px 14px;border-radius:12px;z-index:9999;display:none;max-width:calc(100vw - 24px);width:max-content;pointer-events:none}
.toast.ok{border-color:#ddbf64}
.toast.error{border-color:#7b1818}
.toast.show{display:block;animation:fade var(--toast-duration, 1800ms) ease forwards}
@keyframes fade{0%{opacity:0}10%{opacity:1}90%{opacity:1}100%{opacity:0}}
.offline{position:fixed;top:72px;left:0;right:0;background:#2a2a2a;color:#ffd;display:none;padding:6px 10px;text-align:center;font-size:12px;z-index:10}
.dim input,.dim select,.dim textarea,.dim button{opacity:.7}
.disabled-note{margin-top:8px;font-size:13px;color:#ffd7a1}

/* Toggle (Caja Chica por evento) */
.petty-toggle-wrap{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.petty-toggle-title{font-weight:700;color:var(--text)}

/* Sincronizar saldo inicial desde Finanzas (manual) */
.petty-sync-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap;margin:10px 0 6px 0}
.petty-sync-row .btn-pill{padding:8px 12px}
.a33-link{color:var(--tab-gold);text-decoration:underline}
.switch{position:relative;display:inline-block;width:52px;height:28px}
.switch input{opacity:0;width:0;height:0}
.slider{position:absolute;cursor:pointer;top:0;left:0;right:0;bottom:0;background:#d0d0d0;transition:.2s;border-radius:999px}
.slider:before{position:absolute;content:"";height:22px;width:22px;left:3px;bottom:3px;background:white;transition:.2s;border-radius:50%}
.switch input:checked + .slider{background:var(--ok)}
.switch input:checked + .slider:before{transform:translateX(24px)}
.btn-inline{width:auto;display:inline-block;padding:8px 12px;border-radius:12px;margin-left:10px}
/* Modal */
.modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:50;padding:20px}
.modal .panel{background:#151515;border:1px solid #2a2a2a;border-radius:14px;max-width:1000px;width:100%;max-height:85vh;overflow:auto;padding:16px}
.modal h3{margin:0 0 8px 0}
.modal .close{float:right}
.modal .grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.modal table{max-width:100%}
.modal .scroll{max-height:40vh;overflow:auto;border:1px solid #2a2a2a;border-radius:10px;padding:6px}
/* Caja Chica POS */
.info-strong{
  font-size:14px;
  font-weight:600;
  color:var(--text);
}

.pc-main.disabled{
  opacity:.5;
  pointer-events:none;
}

/* Fieldsets de bloqueo (día cerrado / histórico) */
.pc-lock-fieldset{
  border:0;
  padding:0;
  margin:0;
  min-inline-size:0;
}

/* Indicador visual suave cuando el día está bloqueado */
#pc-count-fieldset[disabled]{
  position:relative;
  opacity:.92;
}

#pc-count-fieldset[disabled]::after{
  content:'CERRADO';
  position:absolute;
  top:10px;
  right:10px;
  font-size:10px;
  letter-spacing:.14em;
  text-transform:uppercase;
  color:#cfcfcf;
  background:rgba(0,0,0,.35);
  border:1px solid #2a2a2a;
  padding:4px 10px;
  border-radius:999px;
  pointer-events:none;
}

.petty-summary h3,
.petty-inicial h3{
  margin-top:0;
}

.petty-summary .card{
  margin:8px 0;
}

.petty-block h4{
  margin:0 0 6px 0;
}

.pc-table{
  width:100%;
  border-collapse:collapse;
  font-size:13px;
}

.pc-table th,
.pc-table td{
  padding:4px 6px;
  border-bottom:1px solid #2a2a2a;
}

.pc-table tfoot td{
  font-weight:700;
}

.pc-table input[type="number"]{
  width:80px;
}

/* Caja Chica — Tabla de movimientos (evitar overflow horizontal en iPad) */
#pc-mov-table{ table-layout:fixed; }
#pc-mov-table th,
#pc-mov-table td{ white-space:normal; }
#pc-mov-table th:nth-child(1), #pc-mov-table td:nth-child(1){ width:110px; white-space:nowrap; }
#pc-mov-table th:nth-child(2), #pc-mov-table td:nth-child(2){ width:140px; white-space:nowrap; }
#pc-mov-table th:nth-child(3), #pc-mov-table td:nth-child(3){ width:70px; white-space:nowrap; }
#pc-mov-table th:nth-child(4), #pc-mov-table td:nth-child(4){ width:110px; white-space:nowrap; }
#pc-mov-table th:nth-child(6), #pc-mov-table td:nth-child(6){ width:120px; white-space:nowrap; text-align:right; }
#pc-mov-table td:nth-child(5){ word-break:break-word; }

.petty-mov h3{
  margin-top:0;
}

.petty-mov .row{
  margin-top:8px;
  gap:8px;
  align-items:flex-end;
}

.petty-mov .row label{
  display:block;
  font-size:12px;
  margin-bottom:2px;
}

.petty-mov .row input[type="number"],
.petty-mov .row input[type="date"],
.petty-mov .row input[type="text"],
.petty-mov .row select{
  width:100%;
}

.btn-small{
  font-size:10px;
  padding:2px 6px;
}
.petty-final h3{
  margin-top:0;
}

.pc-history-actions{
  display:flex;
  gap:8px;
  justify-content:flex-end;
  flex-wrap:wrap;
}

.pc-history-actions button{
  width:auto;
}


.btn-link {
  width:auto;
  display:inline-flex;
  align-items:center;
  justify-content:center;
  background: none;
  border: none;
  padding: 4px 0;
  color: #e0b300;
  text-decoration: underline;
  cursor: pointer;
  font-size: 0.9rem;
}
.btn-link:hover {
  color: #ffd85e;
}


/* Lotes cargados en evento (POS > Inventario) */
.lotes-block{
  margin-top:10px;
  padding:12px;
  border-radius:12px;
  border:1px solid #2a2a2a;
  background:#121212;
}
.lotes-block-head{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;flex-wrap:wrap}
.lotes-block .badge{margin-left:8px}
#tbl-lotes-evento th,#tbl-lotes-evento td{white-space:nowrap}
#tbl-lotes-evento th:nth-child(n+3),
#tbl-lotes-evento td:nth-child(n+3){
  text-align:center;
  font-variant-numeric:tabular-nums;
}


/* Caja Chica - resaltar movimiento */
.pc-row-highlight{
  outline:2px solid rgba(255,215,0,.85);
  background: rgba(255,215,0,.08);
}

/* Caja Chica - Ajuste registrado */
.pc-adj-records{
  margin-top:10px;
  border:1px solid #2a2a2a;
  border-radius:14px;
  padding:10px 12px;
  background: rgba(255,255,255,0.02);
}
.pc-adj-records .title{
  font-weight:800;
  margin-bottom:6px;
}
.pc-adj-record{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  padding:6px 0;
  border-top:1px dashed #2a2a2a;
}
.pc-adj-record:first-of-type{border-top:none;}
.pc-adj-record .amt{
  font-weight:800;
  white-space:nowrap;
}


/* =========================
   Extras por evento (POS > Productos)
   ========================= */
#extras-list{
  margin-top:10px;
  display:flex;
  flex-direction:column;
  gap:8px;
}

.extra-row{
  display:grid;
  grid-template-columns:minmax(220px,1fr) 110px 110px 90px auto;
  gap:10px;
  align-items:center;
  padding:10px 12px;
  border:1px solid #2a2a2a;
  border-radius:12px;
  background:#141414;
}

.extra-row.low{border-color:#5a3d3d}
.extra-row.out{border-color:#5a3d12}

.extra-col{
  min-width:0;
  white-space:nowrap;
  font-variant-numeric:tabular-nums;
}

.extra-name{
  overflow:hidden;
  text-overflow:ellipsis;
}

.extra-cost,.extra-price,.extra-stock{ text-align:right; }

.extra-actions{
  display:flex;
  justify-content:flex-end;
  gap:8px;
  flex-wrap:wrap;
}

.extra-actions button{
  width:auto;
}

/* Botones compactos dentro del listado de extras (sin afectar otros btn-small fuera de esta zona) */
.extra-actions .btn-small{
  padding:6px 10px;
  border-radius:10px;
  font-size:12px;
}

/* iPad/Tablet: que las acciones (Editar/Agregar/Eliminar) bajen a una nueva línea */
@media (max-width: 900px){
  .extra-row{
    grid-template-columns:minmax(160px,1fr) 90px 90px 70px;
  }
  .extra-actions{
    grid-column: 1 / -1;
    grid-row: 2;
    justify-content:flex-start;
    gap:8px;
  }
}

.pill{
  display:inline-block;
  margin-left:8px;
  padding:2px 8px;
  border-radius:999px;
  font-size:10px;
  font-weight:700;
  line-height:1.6;
  border:1px solid #333;
  background:#222;
  color:#ddd;
  vertical-align:middle;
}
.pill.warn{border-color:#5a3d12;color:#ffd7a1}
.pill.danger{border-color:#5a3d3d;color:#ffb3b3}

@media (max-width:560px){
  .extra-row{grid-template-columns:minmax(140px,1fr) 80px 80px 60px}
  .extra-actions{gap:6px}
  .extra-actions .btn-small{padding:6px 8px;font-size:11px}
}

@media (max-width:420px){
  .extra-row{grid-template-columns:1fr 74px 74px 56px}
}


/* ===== Resumen (POS) ===== */
.muted{color:var(--muted)}

.summary-top{padding:16px}
.summary-metrics{
  display:grid;
  grid-template-columns:repeat(5, minmax(0, 1fr));
  gap:10px;
  align-items:stretch;
}
@media (max-width: 980px){
  .summary-metrics{grid-template-columns:repeat(3, minmax(0, 1fr))}
}
@media (max-width: 640px){
  .summary-metrics{grid-template-columns:repeat(2, minmax(0, 1fr))}
}
@media (max-width: 420px){
  .summary-metrics{grid-template-columns:1fr}
}
.metric{
  background:#141414;
  border:1px solid #2a2a2a;
  border-radius:12px;
  padding:10px 12px;
}
.metric .label{
  font-size:12px;
  color:var(--muted);
  margin-bottom:6px;
}
.metric .value{
  font-size:18px;
  font-weight:800;
  letter-spacing:.2px;
  font-variant-numeric:tabular-nums;
}
.metric-strong{
  border-color:rgba(255,215,0,.55);
  box-shadow:0 0 0 3px rgba(255,215,0,.12);
}

.courtesy-card .courtesy-kpis{
  display:grid;
  grid-template-columns:repeat(4, minmax(0, 1fr));
  gap:10px;
  margin:8px 0 6px 0;
}
@media (max-width: 900px){
  .courtesy-card .courtesy-kpis{grid-template-columns:repeat(2, minmax(0, 1fr))}
}
@media (max-width: 520px){
  .courtesy-card .courtesy-kpis{grid-template-columns:1fr}
}
.courtesy-card .courtesy-kpis > div{
  background:#141414;
  border:1px solid #2a2a2a;
  border-radius:12px;
  padding:10px 12px;
  font-size:13px;
}


/* --- Resumen: filtro por Cliente + top clientes --- */
.summary-customer-card{padding:12px}
.summary-customer-card .customer-v2-field label{display:flex;align-items:center;gap:6px;flex-wrap:wrap}
.summary-customer-card #summary-customer-hint{display:block;margin-top:6px}

.customers-card .customers-kpis{
  display:grid;
  grid-template-columns:repeat(2, minmax(0, 1fr));
  gap:10px;
  margin:8px 0 6px 0;
}
@media (max-width: 700px){
  .customers-card .customers-kpis{grid-template-columns:1fr}
}
.customers-card .customers-kpis > div{
  background:#141414;
  border:1px solid #2a2a2a;
  border-radius:12px;
  padding:10px 12px;
  font-size:13px;
}

#tbl-top-clientes{width:100%;table-layout:fixed}
#tbl-top-clientes th:nth-child(1), #tbl-top-clientes td:nth-child(1){width:55%;white-space:normal;word-break:break-word}
#tbl-top-clientes th:nth-child(2), #tbl-top-clientes td:nth-child(2){width:25%;white-space:nowrap}
#tbl-top-clientes th:nth-child(3), #tbl-top-clientes td:nth-child(3){width:20%;white-space:nowrap}
#tbl-top-clientes tbody tr{cursor:pointer}
#tbl-top-clientes tbody tr:active{filter:brightness(.98)}
#tbl-top-clientes th:nth-child(2), #tbl-top-clientes th:nth-child(3){overflow:hidden;text-overflow:ellipsis}
#tbl-top-clientes th:nth-child(2), #tbl-top-clientes td:nth-child(2),
#tbl-top-clientes th:nth-child(3), #tbl-top-clientes td:nth-child(3){text-align:right}


/* --- Resumen: controles de período y archivo --- */
.summary-controls{
  display:flex;
  justify-content:space-between;
  gap:12px;
  align-items:flex-end;
  flex-wrap:wrap;
  margin: 6px 0 12px;
}
.summary-controls-left{
  flex: 1 1 360px;
  min-width: 280px;
}
.summary-controls-right{
  display:flex;
  gap:8px;
  flex-wrap:wrap;
  align-items:center;
  justify-content:flex-end;
}
.tag.small{
  font-size: 12px;
  padding: 2px 8px;
}
#tbl-summary-archives th, #tbl-summary-archives td{
  white-space: nowrap;
}
#tbl-summary-archives td:nth-child(1){
  white-space: normal;
}
.archive-actions{
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  justify-content:flex-end;
}
/* A33 MICRO-ANIMACIONES */
    /* Feedback táctil (iPad): micro “press” para que se sienta nativo */
    button, .btn-mini, .btn-inline, .btn-small, .tabbar button, .actions button, .stepper button{
      -webkit-tap-highlight-color: transparent;
      transition: transform .08s ease, filter .12s ease, box-shadow .12s ease, background-color .12s ease, border-color .12s ease;
    }
    button:not(:disabled):active,
    .tabbar button:not(:disabled):active,
    .actions button:not(:disabled):active,
    .stepper button:not(:disabled):active{
      transform: scale(.98);
    }
    .chip{
      -webkit-tap-highlight-color: transparent;
    }
    .chip:not(.disabled):active{
      transform: scale(.98);
    }

    /* Transición suave entre tabs (fade + slide sutil) */
    .tab{
      transition: opacity .14s ease, transform .14s ease;
    }
    .tab.a33-tab-prep{
      opacity: 0;
      transform: translateY(8px);
    }
    .tab.a33-tab-out{
      opacity: 0;
      transform: translateY(-6px);
      pointer-events: none;
    }

    @media (prefers-reduced-motion: reduce){
      button, .chip, .tab{
        transition: none !important;
      }
    }

/* -----------------------------
   POS · Calculadora (tab)
   ----------------------------- */
.calc-grid{
  display:grid;
  grid-template-columns:minmax(0,1fr) minmax(0,1fr);
  gap:12px;
  align-items:start;
}
.calc-grid .card{margin:0}
@media (max-width: 900px){
  .calc-grid{grid-template-columns:1fr}
}

.calc-display{
  background:#111;
  border:1px solid #2a2a2a;
  border-radius:14px;
  padding:14px;
  overflow:hidden;
}
.calc-history{
  min-height:18px;
  text-align:right;
  color:var(--muted);
  font-size:13px;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}
.calc-output{
  margin-top:6px;
  text-align:right;
  font-size:38px;
  font-weight:800;
  letter-spacing:.2px;
  font-variant-numeric:tabular-nums;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
}

.calc-keys{
  display:grid;
  grid-template-columns:repeat(4, minmax(0,1fr));
  gap:10px;
  margin-top:12px;
}
.calc-keys button{width:100%;padding:14px 0;border-radius:14px;font-size:18px}
.calc-keys button.op{background:#1a1a1a;border-color:#343434;font-weight:800}
.calc-keys button.util{background:#232323;border-color:#3b3b3b;font-weight:800}
.calc-keys button.eq{background:var(--accent);color:#000;font-weight:900}
.calc-keys button.zero{grid-column:span 2}

.fx-quick{display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:10px}
.fx-quick button{width:auto}

/* =============================
   Checklist (POS) — UI
   ============================= */

.checklist-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 10px;
  margin-top: 12px;
}

.chk-head{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 8px;
  margin-bottom: 8px;
}

.chk-head h3{
  margin: 0;
  font-size: 13px;
  letter-spacing: 0.06em;
}

.chk-list{
  display:flex;
  flex-direction: column;
  gap: 8px;
}

.chk-row{
  display:grid;
  grid-template-columns: 22px 1fr auto auto auto;
  gap: 8px;
  align-items:center;
  padding: 8px;
  border: 1px solid rgba(255,255,255,0.08);
  border-radius: 12px;
  background: rgba(0,0,0,0.18);
}

.chk-row input[type="checkbox"]{
  width: 18px;
  height: 18px;
  accent-color: #d8b15f;
}

.chk-text{
  width: 100%;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(0,0,0,0.20);
  color: #f2f2f2;
}

.chk-text:focus{
  outline: none;
  border-color: rgba(216,177,95,0.55);
  box-shadow: 0 0 0 2px rgba(216,177,95,0.18);
}

.chk-mini{
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,0.10);
  background: rgba(255,255,255,0.06);
  color: #f2f2f2;
  font-size: 12px;
}

.chk-mini:active{ transform: translateY(1px); }

#checklist-notes{
  width: 100%;
  resize: vertical;
  min-height: 78px;
}

@media (max-width: 820px){
  .checklist-grid{ grid-template-columns: 1fr; }
}
